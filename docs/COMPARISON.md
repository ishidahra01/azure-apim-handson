# Azure APIM vs AWS API Gateway 比較評価シート

このドキュメントは、3つのシナリオを実装した後の**定量的・定性的評価**を記録するためのテンプレートです。

---

## 📊 総合比較表

| 評価項目 | APIM | AWS API Gateway | 差分 | 備考 |
|---------|------|-----------------|------|------|
| **総実装時間** | ___ 時間 | ___ 時間 | ___ | |
| **設定箇所数（画面/ファイル）** | ___ 箇所 | ___ 箇所 | ___ | |
| **コード行数** | ___ 行 | ___ 行 | ___ | バックエンド除く |
| **ノーコード度合い** | ___% | ___% | ___ | ポリシー/VTL/Lambda |
| **学習コスト（主観1-10）** | ___ | ___ | ___ | 10が最も簡単 |
| **ドキュメント充実度（1-10）** | ___ | ___ | ___ | |

---

## シナリオA: ノーコード認証（Entra ID）

### 作業時間計測

| タスク | APIM | AWS | 差分 |
|-------|------|-----|------|
| Entra ID アプリ登録 | ___ 分 | ___ 分 | 0（共通） |
| API Gateway/APIM 設定 | ___ 分 | ___ 分 | ___ |
| Authorizer 設定 | ___ 分 | ___ 分 | ___ |
| ポリシー/Lambda 実装 | ___ 分 | ___ 分 | ___ |
| テスト・デバッグ | ___ 分 | ___ 分 | ___ |
| **合計** | **___ 分** | **___ 分** | **___** |

### 定性評価

#### APIM の良い点

- [ ] ポリシーXMLで認証が完結
- [ ] クレーム抽出→ヘッダー付与が簡単
- [ ] GUI でポリシー確認可能
- [ ] その他: ___________________

#### APIM の課題

- [ ] XML 記法に慣れが必要
- [ ] エラーメッセージがわかりにくい
- [ ] その他: ___________________

#### AWS の良い点

- [ ] JWT Authorizer がネイティブサポート
- [ ] Lambda で柔軟な拡張が可能
- [ ] その他: ___________________

#### AWS の課題

- [ ] クレーム抽出に Lambda 必要
- [ ] 設定箇所が分散（Authorizer + ルート + Integration）
- [ ] Lambda のデプロイ・管理が追加
- [ ] その他: ___________________

### コード行数

| 実装 | APIM | AWS |
|------|------|-----|
| バックエンド認証コード | 0 行 | 0 行 |
| ポリシー/VTL | ___ 行（XML） | 0 行 |
| Lambda Authorizer | 0 行 | ___ 行 |
| **合計** | **___ 行** | **___ 行** |

---

## シナリオB: レスポンス変換＋モック応答

### 作業時間計測

| タスク | APIM | AWS |
|-------|------|-----|
| API/バックエンド設定 | ___ 分 | ___ 分 |
| レスポンス変換実装 | ___ 分 | ___ 分 |
| モック応答実装 | ___ 分 | ___ 分 |
| Revision/Stage 設定 | ___ 分 | ___ 分 |
| テスト・デバッグ | ___ 分 | ___ 分 |
| **合計** | **___ 分** | **___ 分** |

### 定性評価

#### APIM の良い点

- [ ] C# expression で直感的
- [ ] JSON オブジェクト操作が簡単
- [ ] 条件分岐（choose）でモック実装が容易
- [ ] Revision で並行運用可能
- [ ] その他: ___________________

#### APIM の課題

- [ ] expression のデバッグが難しい
- [ ] その他: ___________________

#### AWS の良い点

- [ ] VTL は強力（慣れれば）
- [ ] Lambda でモック実装が柔軟
- [ ] その他: ___________________

#### AWS の課題

- [ ] VTL の学習コストが高い
- [ ] HTTP API は変換非サポート（REST API必須）
- [ ] モックに Lambda 関数が必要
- [ ] Stage は別 URL（Revision のような並行運用不可）
- [ ] その他: ___________________

### コード行数

| 実装 | APIM | AWS |
|------|------|-----|
| レスポンス変換 | ___ 行（C#） | ___ 行（VTL） |
| モック応答 | ___ 行（XML） | ___ 行（Lambda） |
| **合計** | **___ 行** | **___ 行** |

---

## シナリオC: プロダクト化＋Developer Portal

### 作業時間計測

| タスク | APIM | AWS |
|-------|------|-----|
| Product/Usage Plan 作成 | ___ 分 | ___ 分 |
| レート制限/クォータ設定 | ___ 分 | ___ 分 |
| Subscription/API Key 発行 | ___ 分 | ___ 分 |
| Developer Portal セットアップ | ___ 分 | ___ 分 |
| Portal カスタマイズ | ___ 分 | ___ 分 |
| テスト（Try-It） | ___ 分 | ___ 分 |
| **合計** | **___ 分** | **___ 分** |

### 定性評価

#### APIM の良い点

- [ ] Developer Portal が即利用可能
- [ ] Products で一元管理
- [ ] Try-It がデフォルトで使える
- [ ] GUI でブランディング変更可能
- [ ] その他: ___________________

#### APIM の課題

- [ ] Portal カスタマイズには学習が必要
- [ ] その他: ___________________

#### AWS の良い点

- [ ] Usage Plan の柔軟性が高い
- [ ] その他: ___________________

#### AWS の課題

- [ ] Developer Portal のデプロイが必要（15～30分）
- [ ] Portal のカスタマイズに S3/CloudFront/Lambda の理解が必要
- [ ] Cognito 統合の設定が複雑
- [ ] Try-It 機能の実装に追加工数
- [ ] その他: ___________________

### Developer Portal 比較

| 項目 | APIM | AWS |
|------|------|-----|
| セットアップ時間 | ___ 分 | ___ 分 |
| カスタマイズ時間 | ___ 分 | ___ 分 |
| サインアップ実装 | 標準搭載 | Cognito設定必要 |
| API カタログ | OpenAPI自動 | Lambda実装 |
| Try-It 機能 | 標準搭載 | 追加実装 |
| ユーザー体験（1-10） | ___ | ___ |

---

## 総合評価

### APIM の優位点（重要度順）

1. ___________________________________
2. ___________________________________
3. ___________________________________
4. ___________________________________
5. ___________________________________

### AWS の優位点（重要度順）

1. ___________________________________
2. ___________________________________
3. ___________________________________
4. ___________________________________
5. ___________________________________

### 推奨ユースケース

#### APIM を選ぶべき場合

- [ ] API管理を重視（多数のAPI、複雑なポリシー）
- [ ] 迅速な開発・デプロイが必要
- [ ] ノーコード/ローコード重視
- [ ] Developer Portal が必須
- [ ] Azure エコシステム活用
- [ ] その他: ___________________

#### AWS API Gateway を選ぶべき場合

- [ ] AWS エコシステムとの深い統合
- [ ] Lambda 中心のアーキテクチャ
- [ ] 極めて細かい制御が必要
- [ ] コスト最適化重視（従量課金）
- [ ] その他: ___________________

---

## 工数削減効果の試算

### シナリオA（認証）

- **APIM**: ___ 時間
- **AWS**: ___ 時間
- **削減効果**: ___ 時間（___％削減）

### シナリオB（変換・モック）

- **APIM**: ___ 時間
- **AWS**: ___ 時間
- **削減効果**: ___ 時間（___％削減）

### シナリオC（プロダクト化）

- **APIM**: ___ 時間
- **AWS**: ___ 時間
- **削減効果**: ___ 時間（___％削減）

### 総合

- **APIM 総工数**: ___ 時間
- **AWS 総工数**: ___ 時間
- **総削減効果**: ___ 時間（**___％削減**）

---

## 学習曲線の評価

### 初回実装（このハンズオン）

| 技術 | 学習時間 | 難易度（1-10） | 備考 |
|------|---------|--------------|------|
| APIM ポリシー XML | ___ 時間 | ___ | |
| C# expression | ___ 時間 | ___ | |
| Revisions | ___ 時間 | ___ | |
| Developer Portal | ___ 時間 | ___ | |
| JWT Authorizer | ___ 時間 | ___ | |
| Lambda Authorizer | ___ 時間 | ___ | |
| VTL | ___ 時間 | ___ | |
| Usage Plan | ___ 時間 | ___ | |
| Developer Portal (SAR) | ___ 時間 | ___ | |

### 2回目以降の想定工数

| シナリオ | APIM（2回目） | AWS（2回目） | 差分 |
|---------|-------------|------------|------|
| 認証実装 | ___ 分 | ___ 分 | ___ |
| 変換・モック | ___ 分 | ___ 分 | ___ |
| プロダクト化 | ___ 分 | ___ 分 | ___ |

---

## 結論・推奨事項

### プロジェクトへの適用判断

**APIM を採用すべき**: [ ] はい / [ ] いいえ

**理由**:

_______________________________________________
_______________________________________________
_______________________________________________

### 次のアクション

- [ ] 本番環境での PoC 実施
- [ ] コスト試算（月額料金比較）
- [ ] セキュリティレビュー
- [ ] 運用手順の策定
- [ ] チームトレーニング計画
- [ ] その他: ___________________

---

**記入日**: _______________  
**記入者**: _______________  
**レビュー**: _______________
